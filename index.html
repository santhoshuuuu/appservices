<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>AWS-Azure SKU Mapping with Dynamic Rows</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  h2 { margin-top: 30px; }
  input, select { padding: 8px; width: 200px; }
  table { border-collapse: collapse; width: 100%; margin-top: 20px; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
  th { background-color: #f4f4f4; }
  #suggestions div { cursor: pointer; padding: 4px; }
  #suggestions div:hover { background-color: #eee; }
  .add-row-btn { margin-top: 10px; padding: 8px 12px; cursor: pointer; background-color: #007bff; color: #fff; border: none; }
  .add-row-btn:hover { background-color: #0056b3; }
</style>
</head>
<body>

<h2>Search AWS SKUs</h2>
<input type="text" id="awsSearchInput" placeholder="Type AWS SKU..." oninput="updateSearchSuggestions()" autocomplete="off"/>
<div id="searchSuggestions"></div>

<h2>Order SKUs</h2>
<button class="add-row-btn" onclick="addSkuRow()">+ Add SKU</button>
<form id="skuForm">
  <table id="skuTable">
    <thead>
      <tr>
        <th>AWS SKU</th>
        <th>Azure SKU</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</form>

<button onclick="downloadCSV()">Download All as CSV</button>

<script>
// Existing SKU mappings without region and download info
const skuMap = [
  { aws: "t1.micro", azure: "B1s (1 Core, 1 GB RAM)" },
  { aws: "t2.nano", azure: "B1s (1 Core, 1 GB RAM)" },
  { aws: "t2.micro", azure: "B1s (1 Core, 1 GB RAM)" },
  { aws: "t2.small", azure: "B1ms (1 Core, 2 GB RAM)" },
  { aws: "t2.medium", azure: "B2s (2 Cores, 4 GB RAM)" },
  { aws: "t2.large", azure: "B2ms (2 Cores, 8 GB RAM)" },
  { aws: "t2.xlarge", azure: "B4ms (4 Cores, 16 GB RAM)" },
  { aws: "t2.2xlarge", azure: "B8ms (8 Cores, 32 GB RAM)" },
  { aws: "t3.nano", azure: "B2s (2 Cores, 4 GB RAM)" },
  { aws: "t3.micro", azure: "B2s (2 Cores, 4 GB RAM)" },
  { aws: "t3.small", azure: "B2s (2 Cores, 4 GB RAM)" },
  { aws: "t3.medium", azure: "B2s (2 Cores, 4 GB RAM)" },
  { aws: "t3.large", azure: "B2ms (2 Cores, 8 GB RAM)" },
  { aws: "t3.xlarge", azure: "B4ms (4 Cores, 16 GB RAM)" },
  { aws: "t3.2xlarge", azure: "B8ms (8 Cores, 32 GB RAM)" },
  { aws: "a1.medium", azure: "D2pls_v6 (2 vCPU, 4 GB RAM)" },
  { aws: "a1.large", azure: "D2pls_v6 (2 vCPU, 4 GB RAM)" },
  { aws: "a1.xlarge", azure: "D4pls_v6 (4 vCPUs, 8 GB RAM)" },
  { aws: "a1.2xlarge", azure: "D8pls_v6 (8 vCPUs, 16 GB RAM)" },
  { aws: "a1.4xlarge", azure: "D16pls_v6 (16 vCPUs, 32 GB RAM)" },
  { aws: "a1.metal", azure: "D16pls_v6 (16 vCPUs, 32 GB RAM)" },
  { aws: "c1.medium", azure: "F2s v2 (2 vCPUs, 4 GB RAM)" },
  { aws: "c1.xlarge", azure: "F8s v2 (8 vCPUs, 16 GB RAM)" },
  { aws: "c3.large", azure: "F2s v2 (2 vCPUs, 4 GB RAM)" },
  { aws: "c3.xlarge", azure: "F4s v2 (4 vCPUs, 8 GB RAM)" },
  { aws: "c3.2xlarge", azure: "F8s v2 (8 vCPUs, 16 GB RAM)" },
  { aws: "c3.4xlarge", azure: "F16s v2 (16 vCPUs, 32 GB RAM)" },
  { aws: "c3.8xlarge", azure: "F32s v2 (32 vCPUs, 64 GB RAM)" },
  { aws: "c4.large", azure: "F2s v2 (2 vCPUs, 4 GB RAM)" },
  { aws: "c4.xlarge", azure: "F4s v2 (4 vCPUs, 8 GB RAM)" },
  { aws: "c4.2xlarge", azure: "F8s v2 (8 vCPUs, 16 GB RAM)" },
  { aws: "c4.4xlarge", azure: "F16s v2 (16 vCPUs, 32 GB RAM)" },
  { aws: "c4.8xlarge", azure: "F48s v2 (48 vCPUs, 96 GB RAM)" },
  { aws: "c5.large", azure: "F2s v2 (2 vCPUs, 4 GB RAM)" },
  { aws: "c5.xlarge", azure: "F4s v2 (4 vCPUs, 8 GB RAM)" },
  { aws: "c5.2xlarge", azure: "F8s v2 (8 vCPUs, 16 GB RAM)" },
  { aws: "c5.4xlarge", azure: "F16s v2 (16 vCPUs, 32 GB RAM)" },
  { aws: "c5.9xlarge", azure: "F48s v2 (48 vCPUs, 96 GB RAM)" },
  { aws: "c5.12xlarge", azure: "F48s v2 (48 vCPUs, 96 GB RAM)" },
  { aws: "c5.18xlarge", azure: "F72s v2 (72 vCPUs, 144 GB RAM)" },
  { aws: "c5.24xlarge", azure: "F72s v2 (72 vCPUs, 144 GB RAM)" },
  { aws: "c5.metal", azure: "F72s v2 (72 vCPUs, 144 GB RAM)" },
  { aws: "c5a.large", azure: "F2s v2 (2 vCPUs, 4 GB RAM)" },
  { aws: "c5a.xlarge", azure: "F4s v2 (4 vCPUs, 8 GB RAM)" },
  { aws: "c5a.2xlarge", azure: "F8s v2 (8 vCPUs, 16 GB RAM)" },
  { aws: "c5a.4xlarge", azure: "F16s v2 (16 vCPUs, 32 GB RAM)" },
  { aws: "c5a.8xlarge", azure: "F32s v2 (32 vCPUs, 64 GB RAM)" },
  { aws: "c5a.12xlarge", azure: "F48s v2 (48 vCPUs, 96 GB RAM)" },
  { aws: "c5a.16xlarge", azure: "F64s v2 (64 vCPUs, 128 GB RAM)" },
  { aws: "c5a.24xlarge", azure: "F72s v2 (72 vCPUs, 144 GB RAM)" },
  { aws: "c5ad.large", azure: "F2s v2 (2 vCPUs, 4 GB RAM)" },
  { aws: "c5ad.xlarge", azure: "F4s v2 (4 vCPUs, 8 GB RAM)" },
  { aws: "c5ad.2xlarge", azure: "F8s v2 (8 vCPUs, 16 GB RAM)" },
  { aws: "c5ad.4xlarge", azure: "F16s v2 (16 vCPUs, 32 GB RAM)" },
  { aws: "c5ad.8xlarge", azure: "F32s v2 (32 vCPUs, 64 GB RAM)" },
  { aws: "c5ad.12xlarge", azure: "F48s v2 (48 vCPUs, 96 GB RAM)" },
  { aws: "c5ad.16xlarge", azure: "F64s v2 (64 vCPUs, 128 GB RAM)" },
  { aws: "c5ad.24xlarge", azure: "F72s v2 (72 vCPUs, 144 GB RAM)" },
  { aws: "c5d.large", azure: "F2s v2 (2 vCPUs, 4 GB RAM)" },
  { aws: "c5d.xlarge", azure: "F4s v2 (4 vCPUs, 8 GB RAM)" },
  { aws: "c5d.2xlarge", azure: "F8s v2 (8 vCPUs, 16 GB RAM)" },
  { aws: "c5d.4xlarge", azure: "F16s v2 (16 vCPUs, 32 GB RAM)" },
  { aws: "c5d.9xlarge", azure: "F48s v2 (48 vCPUs, 96 GB RAM)" },
  { aws: "c5d.12xlarge", azure: "F48s v2 (48 vCPUs, 96 GB RAM)" },
  { aws: "c5d.18xlarge", azure: "F72s v2 (72 vCPUs, 144 GB RAM)" },
  { aws: "c5d.24xlarge", azure: "F72s v2 (72 vCPUs, 144 GB RAM)" },
  { aws: "c5d.metal", azure: "F72s v2 (72 vCPUs, 144 GB RAM)" }
];

const tbody = document.querySelector('#skuTable tbody');

// Function to add a new row
function addSkuRow() {
  const row = document.createElement('tr');

  // AWS SKU cell
  const awsCell = document.createElement('td');
  const awsSelect = document.createElement('select');
  awsSelect.innerHTML = `<option value="">Select AWS SKU</option>`;
  skuMap.forEach(item => {
    const option = document.createElement('option');
    option.value = item.aws;
    option.textContent = item.aws;
    awsSelect.appendChild(option);
  });
  awsSelect.onchange = () => {
    const selectedAws = awsSelect.value;
    const match = skuMap.find(s => s.aws === selectedAws);
    if (match) {
      azureInput.value = match.azure;
    } else {
      azureInput.value = '';
    }
  };
  awsCell.appendChild(awsSelect);
  row.appendChild(awsCell);

  // Azure SKU cell
  const azureCell = document.createElement('td');
  const azureInput = document.createElement('input');
  azureInput.type = 'text';
  azureInput.readOnly = true;
  azureCell.appendChild(azureInput);
  row.appendChild(azureCell);

  // Actions cell
  const actionCell = document.createElement('td');
  const deleteBtn = document.createElement('button');
  deleteBtn.type = 'button';
  deleteBtn.textContent = 'Remove';
  deleteBtn.onclick = () => row.remove();
  actionCell.appendChild(deleteBtn);
  row.appendChild(actionCell);

  tbody.appendChild(row);
}

// Search suggestion logic
const searchInput = document.getElementById('awsSearchInput');
const searchSuggestionsDiv = document.getElementById('searchSuggestions');

function updateSearchSuggestions() {
  const val = searchInput.value.trim().toLowerCase();
  searchSuggestionsDiv.innerHTML = '';

  if (!val) {
    return;
  }

  const matches = skuMap.filter(item => item.aws.toLowerCase().includes(val));
  matches.forEach(item => {
    const div = document.createElement('div');
    div.textContent = item.aws;
    div.onclick = () => {
      searchInput.value = item.aws;
      showMatchingOption(item);
      searchSuggestionsDiv.innerHTML = '';
    };
    searchSuggestionsDiv.appendChild(div);
  });
}

function showMatchingOption(item) {
  // Add a new row with selected SKU
  const row = document.createElement('tr');

  // AWS Select
  const awsCell = document.createElement('td');
  const awsSelect = document.createElement('select');
  skuMap.forEach(s => {
    const option = document.createElement('option');
    option.value = s.aws;
    option.textContent = s.aws;
    if (s.aws === item.aws) option.selected = true;
    awsSelect.appendChild(option);
  });
  awsSelect.onchange = () => {
    const selectedAws = awsSelect.value;
    const match = skuMap.find(s => s.aws === selectedAws);
    if (match) {
      azureInput.value = match.azure;
    } else {
      azureInput.value = '';
    }
  };
  awsCell.appendChild(awsSelect);
  row.appendChild(awsCell);

  // Azure SKU
  const azureCell = document.createElement('td');
  const azureInput = document.createElement('input');
  azureInput.type = 'text';
  azureInput.readOnly = true;
  azureInput.value = item.azure;
  azureCell.appendChild(azureInput);
  row.appendChild(azureCell);

  // Remove button
  const actionCell = document.createElement('td');
  const removeBtn = document.createElement('button');
  removeBtn.type = 'button';
  removeBtn.textContent = 'Remove';
  removeBtn.onclick = () => row.remove();
  actionCell.appendChild(removeBtn);
  row.appendChild(actionCell);

  tbody.appendChild(row);
}

// Download all data as CSV
function downloadCSV() {
  const headers = ['AWS SKU', 'Azure SKU'];
  const rows = Array.from(tbody.children).map(row => {
    const aws = row.children[0].children[0].value;
    const azure = row.children[1].children[0].value;
    return [aws, azure];
  });

  const csvContent = [headers, ...rows]
    .map(e => e.join(','))
    .join('\n');

  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
  const url = URL.createObjectURL(blob);
  const link = document.createElement('a');
  link.setAttribute('href', url);
  link.setAttribute('download', 'skus.csv');
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
}
</script>

</body>
</html>
