<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>AWS-Azure SKU Mapping with Colored Headers</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  h2 { margin-top: 30px; }
  input, select { padding: 8px; width: 200px; }
  table { border-collapse: collapse; width: 100%; margin-top: 20px; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
  /* Style for header cells */
  th.aws-header { background-color: #ffcc00; } /* Bright yellow for AWS header */
  th.azure-header { background-color: #e0e0e0; } /* Light grey for Azure header */
  th.actions-header { background-color: #f8d7da; } /* Light red for Actions header */

  #suggestions div { cursor: pointer; padding: 4px; }
  #suggestions div:hover { background-color: #eee; }
  .add-row-btn { margin-top: 10px; padding: 8px 12px; cursor: pointer; background-color: #007bff; color: #fff; border: none; }
  .add-row-btn:hover { background-color: #0056b3; }
</style>
</head>
<body>

<h2>Search AWS SKUs</h2>
<input type="text" id="awsSearchInput" placeholder="Type AWS SKU..." oninput="updateSearchSuggestions()" autocomplete="off"/>
<div id="searchSuggestions" style="border:1px solid #ccc; max-width:200px; max-height:150px; overflow:auto; position:absolute; background:white; z-index:1000;"></div>

<h2>Order SKUs</h2>
<button class="add-row-btn" onclick="addSkuRow()">+ Add SKU</button>
<form id="skuForm">
  <table id="skuTable">
    <thead>
      <tr>
        <th class="aws-header">AWS SKU</th>
        <th class="azure-header">Azure SKU</th>
        <th class="actions-header">Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</form>

<button onclick="downloadCSV()">Download All as CSV</button>

<script>
// Sample SKU data
const skuMap = [
  { aws: 'AWS1', azure: 'Azure1' },
  { aws: 'AWS2', azure: 'Azure2' },
  { aws: 'AWS3', azure: 'Azure3' },
  { aws: 'AWS4', azure: 'Azure4' },
  { aws: 'AWS5', azure: 'Azure5' },
  { aws: 'AWS6', azure: 'Azure6' },
  { aws: 'AWS7', azure: 'Azure7' },
  { aws: 'AWS8', azure: 'Azure8' },
  { aws: 'AWS9', azure: 'Azure9' },
  { aws: 'AWS10', azure: 'Azure10' }
  // Add more SKUs as needed
];

const tbody = document.querySelector('#skuTable tbody');

// Function to add a new SKU row with validation
function addSkuRow() {
  const row = document.createElement('tr');

  // AWS SKU cell with select
  const awsCell = document.createElement('td');
  const awsSelect = document.createElement('select');
  awsSelect.innerHTML = `<option value="">Select AWS SKU</option>`;
  skuMap.forEach(item => {
    const option = document.createElement('option');
    option.value = item.aws;
    option.textContent = item.aws;
    awsSelect.appendChild(option);
  });
  awsSelect.onchange = () => {
    const selectedAws = awsSelect.value;
    const match = skuMap.find(s => s.aws === selectedAws);
    const azureInput = row.children[1].children[0];
    if (match) {
      azureInput.value = match.azure;
    } else {
      azureInput.value = '';
    }
  };
  awsCell.appendChild(awsSelect);
  row.appendChild(awsCell);

  // Azure SKU input (read-only)
  const azureCell = document.createElement('td');
  const azureInput = document.createElement('input');
  azureInput.type = 'text';
  azureInput.readOnly = true;
  azureCell.appendChild(azureInput);
  row.appendChild(azureCell);

  // Actions cell
  const actionCell = document.createElement('td');
  const deleteBtn = document.createElement('button');
  deleteBtn.type = 'button';
  deleteBtn.textContent = 'Remove';
  deleteBtn.onclick = () => row.remove();
  actionCell.appendChild(deleteBtn);
  row.appendChild(actionCell);

  tbody.appendChild(row);
}

// Function to update search suggestions
function updateSearchSuggestions() {
  const input = document.getElementById('awsSearchInput');
  const suggestionsDiv = document.getElementById('searchSuggestions');
  const query = input.value.trim().toLowerCase();
  suggestionsDiv.innerHTML = '';

  if (query === '') {
    suggestionsDiv.style.display = 'none';
    return;
  }

  const matches = skuMap.filter(item => item.aws.toLowerCase().includes(query));
  matches.forEach(item => {
    const div = document.createElement('div');
    div.textContent = item.aws;
    div.onclick = () => {
      showMatchingOption(item.aws);
      suggestionsDiv.innerHTML = '';
    };
    suggestionsDiv.appendChild(div);
  });
  suggestionsDiv.style.display = matches.length > 0 ? 'block' : 'none';
}

// Function to set selected SKU from suggestion
function showMatchingOption(selectedAws) {
  document.getElementById('awsSearchInput').value = selectedAws;
  // Optional: implement logic to add the SKU to the table if needed
}

// Function to download CSV
function downloadCSV() {
  const rows = [];
  const tbody = document.querySelector('#skuTable tbody');
  tbody.querySelectorAll('tr').forEach(tr => {
    const awsSelect = tr.children[0].children[0];
    const aws = awsSelect.value || '';
    const azure = tr.children[1].children[0].value || '';
    rows.push({ aws, azure });
  });
  let csvContent = 'AWS SKU,Azure SKU\n';
  rows.forEach(row => {
    csvContent += `"${row.aws}","${row.azure}"\n`;
  });
  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'sku_mapping.csv';
  a.click();
  URL.revokeObjectURL(url);
}

// Initialize with one row
addSkuRow();

</script>

</body>
</html>
